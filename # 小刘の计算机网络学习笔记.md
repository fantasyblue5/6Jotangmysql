# 小刘の计算机网络学习笔记
## 2.1 应用层协议原理
### 1.应用层：应用程序所需要的网络服务、客户和服务器、进程和运输层接口
### 2.研发网络应用程序核心：写出能够运行在不同的端系统和通过网络彼此通信的程序
### 3.在研发应用程序时，需要编写在多端系统运行的软件，不需要写在网络核心设备上（不在应用层起作用，仅在较低层起作用）
### 4.将应用软件限制在端系统的方法，促进网络程序的研发和部署


## 2.1.1网络应用程序体系结构
### 1.应用程序体系结构：规定了如何在各种端系统上组织该应用程序
### 2.两种主流体系结构：客户-服务器体系结构、对等体系结构
### 客户-服务器体系结构：
* 服务器：服务于来自其他称为客户的主机的请求。客户间不直接通信，服务器有固定的IP地址
* 数据中心：用于创建强大的虚拟机服务器，配备大量主机
### P2P体系结构：
* 应用程序在间断连接的主机对之间直接通信，这些主机对之间称为对等方，对等方通信不必经过专门的服务器
* 自扩展性：每个对等方通过向其他对等方分发文件为系统增加服务能力
* 未来P2P结构由于高度非集中型结构，面临安全性，性能和可靠性等挑战


## 2.1.2 进程通信
### 进程：运行在端系统中的一个程序
### 报文：两个不同端系统上的进程，通过跨越计算机网络交换报文而相互通信
### 1.客户和服务器进程
* 网络应用程序由成对的进程组成，分别标识为客户和服务器，如web中浏览器为客户进程，web服务器为服务器进程
* 一般来说，发起通信的进程被标识为客户，在会话开始时等待联系的进程是服务器

### 2.进程与计算机网络之间的接口
### 套接字：进程通过名为套接字的软件接口向网络发生报文和接收报文（相当于门），也被称为应用程序编程接口
### 应用者可以控制套接字在应用层端的一切，对运输层的权限几乎没有

### 3.进程选址
### 发送端：主机由其IP地址标识
### 接收端：目的地端口号


## 2.1.3 可供应用程序使用的运输服务
### 1.可靠数据传输
* 发送进程将其数据传递进套接字，就可以完全将该数据传递至接收进程
* 容忍丢失的应用：在运输层协议不提供可靠数据传输时，可接收到达不了的数据
* 多媒体应用能承受一定量的数据丢失
### 2.吞吐量
* 吞吐量：发送进程能够向接收进程交付比特的速率
* 运输层协议能以某特定速率提供确保的可用吞吐量
* 带宽敏感的应用：具有吞吐量要求的程序
* 弹性应用：根据当时可用的带宽或多或少地利用可供使用的吞吐量
### 3.定时
### 保证较小的时间延迟，例如防止聊天延时、游戏延时等
### 4.安全性
### 运输协议提供的安全性服务：机密性、数据完整性、端点鉴别


## 2.1.4 因特网提供的运输服务
### 1.TCP服务
### TCP服务模型包括：面向连接服务、可靠数据传输服务
### 面向连接服务：
* 握手过程：让客户和服务器互相交换运输层控制信息
* 在两个进程的套进字之间建立TCP连接
### 可靠数据传输服务：当应用程序一端将字节流进套进字时，依靠TCP将相同的字节交付给接收方的套进字
### TCP还具有拥塞控制机制，即网络出现拥塞时，抑制发送进程
### TCP的加强版本：安全套接字层，用SSL加强以提供安全服务

### 2.UDP
### UDP：轻量级运输协议，提供不可靠数据传输服务，没有拥塞控制机制


## 2.1.5 应用层协议
### 应用层协议：定义了在不同端系统上的应用程序如何传递报文，定义了：
#### 1.交换的报文类型，如请求报文和响应报文
#### 2.各种报文类型的语法，如报文中的各个字段及这些字段是如何描述的
#### 3.字段的语义，即这些字段中信息的含义
#### 4.确定一个进程何时以及如何发送报文，对报文相应的规则
### 应用层协议只是网络应用的一部分，如web的应用层协议为HTTP，电子邮件的主要应用层协议为SMTP


## 2.2 Web和HTTP

## 2.2.1 HTTP
### 1.HTTP：超文本传输协议
### 2.web页面由对象组成，一个对象只是一个文件
### 多数web页面含有一个HTML基本文件以及几个引用对象，HTML通过URL地址引用其他对象，每个URL地址由：存放对象的服务器主机名、对象的路径名两部分组成
### 3.web浏览器实现了客户端，web服务器实现了服务器端
### 4.HTTP定义了客户向服务器请求web页面的方式，以及服务器向客户传送web页面的方式。HTTP使用TCP作为支撑运输协议，是一个无状态协议

## 2.2.2 非持续连接和持续连接
### 非持续连接：每个请求经一个单独的TCP发送
### 持续连接：所有的请求及其响应经相同的TCP连接发送


## 2.2.3 HTTP报文格式（爬虫DNA动了）
### 1.请求报文
#### 第一行：请求行(request)：方法字段、URL字段、HTTP版本字段
* HTTP方法字段绝大多数使用get
#### 后继行：首部行(header)：
* host：主机
* connection：是否持续连接
* user-agent：指明发送请求的浏览器类型
* accept-language：语言
### 2.HTTP响应报文
#### 初始状态行、首部行、实体体


## 2.2.4 用户与服务器的交互：cookie
### cookie：为了识别用户，允许站点对用户进行追踪
### cookie的四个组件：
* HTTP响应报文中的一个cookie首部行
* HTTP请求报文中的一个cookie首部行
* 用户端系统中一个cookie文件
* 位于web站点的一个后端数据库


## 2.2.5 web缓存
### 1.web缓存器，也叫代理服务器，代表初始服务器来满足http请求的网络实体
### 2.web缓存器有自己的磁盘存储空间，并在存储空间中保存最近请求过的对象的副本
### 3.web缓存器既是客户，又是服务器
### 4.部署web缓存器的原因：
* 大大减少客户请求的响应时间
* 大大减少一个机构的接入链路到因特网的通信量
* 大大降低因特网上的web流量，改善性能


## 2.2.6 条件get方法
### 条件get方法：
#### 1.请求报文使用get方法
#### 2.请求报文中包含一个"If-Modified-Since:"首部行


## 2.3 因特网中的电子邮件
### 因特网电子邮件系统组成：用户代理、邮件服务器、简单邮件传输协议（SMTP)
### 每个邮件服务器拥有一个邮箱

## 2.3.1 SMTP
### SMTP：用于从发送方的邮件服务器发送报文到接收方的服务器
### SMTP需要将多媒体数据编码为ASCII码，再将ASCII码还原为多媒体数据


## 2.3.2 与HTTP的对比
### 1.HTTP从web服务器向web客户传送文件，SMTP从一个邮件服务器向另一个邮件服务器传送文件
### 2.HTTP是拉协议，即某些人在web服务器上装载信息，用户使用HTTP从该服务器拉取这些信息。SMTP是推协议，即发送邮件服务器把文件推向接收邮件服务器
### 3.SMTP要求每个报文采用ASCII码格式
### 4.HTTP要求把每个对象封装到自己的HTTP响应报文中，SMTP把所有对象放在一个报文中

## 2.3.3 邮件报文格式
### 1.首部行from、to
### 2.空白行
### 3.ASCII格式的报文体

## 2.3.4 邮件访问协议
### 流行的邮件访问协议：第三版的邮局协议、因特网邮件访问协议、HTTP等
### 1.POP3
#### 工作阶段：特许、事务处理、更新
* 特许：用户代理发送用户名和口令鉴别用户
* 事务处理：用户代理取回报文，还可以对报文做删除标记，取消报文删除标记，获取邮件的统计信息
* 更新：结束PO3会话
### 2.IMAP
#### IMAP为用户提供了创建文件夹以及将邮件从一个文件夹移动到另一个文件夹的命令
#### IMAP还为用户提供了在远程文件夹中查询邮件的命令，按指定的条件查询匹配的邮件
#### IMAP具有允许用户代理获取报文某些部分的命令
### 3.基于web的电子邮件
#### 用户代理是普通的浏览器，用户与其他远程邮箱的通信通过HTTP进行



